<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<link href="../css/public.css" rel="stylesheet">
		<script src="../js/jquery-3.5.1.min.js"></script>
		<script>
			$(function(){
				let xhr = new XMLHttpRequest();
				
				$("#text").on("click", function(){
					
					//요청
					xhr.open("get", "text.jsp", true);
					xhr.send();
					//응답
					xhr.onreadystatechange = function(){
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							// res = 홍길동/개나리/진달래/수선화/라일락/무궁화/백합
							res = res.split("/");
							code = "<ul>";
							$.each(res, function(){
								code += "<li>" + this + "</li>";
							})
							code += "</ul>";
							$("#result1").html(code);
						}
					}
				})
				
				$("#jsonarr").on("click", function(){
					
					//요청
					xhr.open("get", "jasonarr.jsp", true);
					xhr.send();
					//응답
					xhr.onreadystatechange = function(){
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res)
							// res = 홍길동/개나리/진달래/수선화/라일락/무궁화/백합
							code = "<ol>";
							$.each(resjson, function(){
								code += "<li>" + this + "</li>";
							})
							code += "</ol>";
							$("#result2").html(code);
						}
					}
				})
				
				$("#jsonobj").on("click", function(){
					
					//요청
					xhr.open("get", "jsonobj.jsp", true);
					xhr.send();
					//응답
					xhr.onreadystatechange = function(){
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res);
							// res = 홍길동/개나리/진달래/수선화/라일락/무궁화/백합
					
							res = "이름 : " + resjson.name + "<br>";
							res += "주소 : " + resjson.addrws + "<br>";
							res += "전화번호 : " + resjson.tel + "<br>";
							
							$("#result3").html(res);
						}
					}
				})
				
				$("#jsonobarr").on("click", function(){
					
					//요청
					xhr.open("get", "jsonobarr.jsp", true);
					xhr.send();
					//응답
					xhr.onreadystatechange = function(){
						if(this.readyState == 4 && this.status == 200){
							res = this.responseText;
							resjson = JSON.parse(res);
							// res = 홍길동/개나리/진달래/수선화/라일락/무궁화/백합
							res = "";
							$.each(resjson, function(i){
								res += "이름 : " + resjson[i].name + "<br>";
								res += "주소 : " + resjson[i].addrws + "<br>";
								res += "전화번호 : " + resjson[i].tel + "<br><br>";
							})
							
							$("#result4").html(res);
						}
					}
				})
				
				
			})
		</script>
		<style>
			.box {
				height : 500px;
			}
			.box #result1, .box div {
				width : 200px;
				height : auto;
				border : 2px dotted green; 
				padding : 20px;
				margin : 10px;
				float : left;
			}
		</style>
	</head>
	<body>
		
		<div class="box">
			<h3>타이틀</h3>
			<input type="button" id="text" value="text 데이타">
			<input type="button" id="jsonarr" value="json 배열">
			<input type="button" id="jsonobj" value="json object">
			<input type="button" id="jsonobarr" value="json object배열">
			<br>
			<div id="result1"></div>
			<div id="result2"></div>
			<div id="result3"></div>
			<div id="result4"></div>
		</div> 
		
	</body>
</html>